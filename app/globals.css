@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Ensure proper text scaling and zoom support */
  html {
    -webkit-text-size-adjust: 100%;
    -ms-text-size-adjust: 100%;
    text-size-adjust: 100%;
  }

  /* Improve readability */
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  /* Ensure focus indicators are visible with Primary Accent color */
  *:focus-visible {
    outline: 3px solid #8D240C;
    outline-offset: 2px;
  }

  /* Fallback for browsers that don't support :focus-visible */
  @supports not selector(:focus-visible) {
    *:focus {
      outline: 3px solid #8D240C;
      outline-offset: 2px;
    }
  }

  /* Screen reader only class for accessibility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Make sr-only visible when focused */
  .sr-only:focus,
  .sr-only:active {
    position: static;
    width: auto;
    height: auto;
    overflow: visible;
    clip: auto;
    white-space: normal;
  }

  /* Prevent horizontal overflow on mobile */
  body {
    overflow-x: hidden;
  }

  /* Ensure images and media scale properly */
  img,
  video,
  canvas,
  svg {
    max-width: 100%;
    height: auto;
  }

  /* Improve tap highlight on mobile */
  * {
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
  }

  /* Ensure smooth scrolling works across browsers */
  html {
    scroll-behavior: smooth;
  }

  /* Fix for Safari flexbox issues */
  button,
  input,
  select,
  textarea {
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
  }

  /* Ensure consistent box-sizing */
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }
}

@layer utilities {
  /* Custom utility for smooth scrolling */
  .scroll-smooth {
    scroll-behavior: smooth;
  }

  /* Utility for preventing text selection on interactive elements */
  .select-none-touch {
    -webkit-user-select: none;
    user-select: none;
  }

  /* Fade in animation for loading states */
  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.3s ease-out forwards;
  }

  /* Slide in from right animation for toasts */
  @keyframes slideInRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-slideInRight {
    animation: slideInRight 0.3s ease-out forwards;
  }

  /* Slide out to right animation for toasts */
  @keyframes slideOutRight {
    from {
      transform: translateX(0);
      opacity: 1;
    }
    to {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .animate-slideOutRight {
    animation: slideOutRight 0.3s ease-in forwards;
  }

  /* Reduce motion for users who prefer it */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }
}
